/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var $=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var P=Object.prototype.hasOwnProperty;var W=(d,e)=>{for(var t in e)$(d,t,{get:e[t],enumerable:!0})},Y=(d,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of E(e))!P.call(d,a)&&a!==t&&$(d,a,{get:()=>e[a],enumerable:!(i=M(e,a))||i.enumerable});return d};var b=d=>Y($({},"__esModule",{value:!0}),d);var T={};W(T,{default:()=>u});module.exports=b(T);var s=require("obsidian"),N={dailyNotesFolder:"",weeklyNotesFolder:"",dailyNoteFormat:"YYYY-MM-DD",weeklyNoteFormat:"GGGG - [Week] W",weeklyDateRangeFormat:"MMMM Do"},u=class extends s.Plugin{async onload(){await this.loadSettings(),this.addCommand({id:"create-daily-note",name:"Create daily note",callback:()=>{this.createDailyNote()}}),this.addCommand({id:"create-weekly-note",name:"Create weekly note",callback:()=>{this.createWeeklyNote()}}),this.addSettingTab(new x(this.app,this))}async loadSettings(){let e=await this.loadData();this.settings=Object.assign({},N,e),this.settings.dailyNotesFolder&&(this.settings.dailyNotesFolder=this.settings.dailyNotesFolder.trim().replace(/^\/+|\/+$/g,"")),this.settings.weeklyNotesFolder&&(this.settings.weeklyNotesFolder=this.settings.weeklyNotesFolder.trim().replace(/^\/+|\/+$/g,"")),(!this.settings.dailyNoteFormat||this.settings.dailyNoteFormat.trim()==="")&&(this.settings.dailyNoteFormat=N.dailyNoteFormat),(!this.settings.weeklyNoteFormat||this.settings.weeklyNoteFormat.trim()==="")&&(this.settings.weeklyNoteFormat=N.weeklyNoteFormat),(!this.settings.weeklyDateRangeFormat||this.settings.weeklyDateRangeFormat.trim()==="")&&(this.settings.weeklyDateRangeFormat=N.weeklyDateRangeFormat)}async saveSettings(){await this.saveData(this.settings)}buildFilePath(e,t){let i=e?`${e}/${t}.md`:`${t}.md`;return(0,s.normalizePath)(i)}buildLinkPath(e,t){return e?`${e}/${t}`:t}async ensureFolderExists(e){if(!e)return;let t=(0,s.normalizePath)(e);this.app.vault.getAbstractFileByPath(t)||await this.app.vault.createFolder(t)}async createDailyNote(){try{let e=moment(),t=e.format(this.settings.dailyNoteFormat);await this.ensureFolderExists(this.settings.dailyNotesFolder);let i=this.buildFilePath(this.settings.dailyNotesFolder,t),a=this.generateDailyNoteContent(e);await this.createOrUpdateNote(i,a,"daily")}catch(e){console.error("Error creating daily note:",e),new s.Notice("Failed to create daily note. Check console for details.")}}async createWeeklyNote(){try{let e=moment(),t=e.format(this.settings.weeklyNoteFormat);await this.ensureFolderExists(this.settings.weeklyNotesFolder);let i=this.buildFilePath(this.settings.weeklyNotesFolder,t),a=this.generateWeeklyNoteContent(e);await this.createOrUpdateNote(i,a,"weekly")}catch(e){console.error("Error creating weekly note:",e),new s.Notice("Failed to create weekly note. Check console for details.")}}generateDailyNoteContent(e){try{let t=e.format("dddd MMMM Do, YYYY"),i=e.format(this.settings.weeklyNoteFormat),a=this.buildLinkPath(this.settings.weeklyNotesFolder,i),m=e.clone().subtract(1,"day").format(this.settings.dailyNoteFormat),c=this.buildLinkPath(this.settings.dailyNotesFolder,m),k=e.clone().add(1,"day").format(this.settings.dailyNoteFormat),F=this.buildLinkPath(this.settings.dailyNotesFolder,k);return`*${t}*

Week - [[${a}]]
Yesterday - [[${c}]]
Tomorrow - [[${F}]]

---

`}catch(t){throw console.error("Error generating daily note content:",t),new Error("Invalid date format settings")}}generateWeeklyNoteContent(e){try{let t=e.clone().isoWeekday(1),i=t.clone().add(6,"days"),a;if(t.month()===i.month()){let y=this.settings.weeklyDateRangeFormat,r=y.includes(" ")&&y.split(" ").pop()||"Do";a=`${t.format(y)} - ${i.format(r)}`}else a=`${t.format(this.settings.weeklyDateRangeFormat)} - ${i.format(this.settings.weeklyDateRangeFormat)}`;let c=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((y,r)=>{let l=t.clone().add(r,"days").format(this.settings.dailyNoteFormat),o=this.buildLinkPath(this.settings.dailyNotesFolder,l);return`${y} - [[${o}]]`}).join(`
`),F=e.clone().subtract(1,"week").format(this.settings.weeklyNoteFormat),h=this.buildLinkPath(this.settings.weeklyNotesFolder,F),w=e.clone().add(1,"week").format(this.settings.weeklyNoteFormat),f=this.buildLinkPath(this.settings.weeklyNotesFolder,w);return`*${a}*

Last week - [[${h}]]

${c}

Next week - [[${f}]]

---

`}catch(t){throw console.error("Error generating weekly note content:",t),new Error("Invalid date format settings")}}async createOrUpdateNote(e,t,i){try{let a=this.app.vault.getAbstractFileByPath(e);a instanceof s.TFile?(await this.app.vault.process(a,c=>t+`
`+c),new s.Notice(`${i==="daily"?"Daily":"Weekly"} note template added to existing file`)):(await this.app.vault.create(e,t),new s.Notice(`${i==="daily"?"Daily":"Weekly"} note created`));let m=this.app.vault.getAbstractFileByPath(e);m instanceof s.TFile&&await this.app.workspace.getLeaf().openFile(m)}catch(a){throw console.error("Error creating/updating note:",a),new s.Notice(`Failed to create ${i} note. The file may be open in another program or the format may be invalid.`),a}}},x=class extends s.PluginSettingTab{constructor(e,t){super(e,t),this.plugin=t}display(){let{containerEl:e}=this;e.empty(),new s.Setting(e).setName("Folder locations").setHeading();let t=e.createDiv("setting-item-description"),i=moment().format(this.plugin.settings.dailyNoteFormat),a=this.plugin.settings.dailyNotesFolder?`${this.plugin.settings.dailyNotesFolder}/${i}.md`:`${i}.md`;t.setText(`Example path: ${a}`),new s.Setting(e).setName("Daily notes folder").setDesc("Folder where daily notes will be created (leave empty for vault root)").addText(l=>l.setPlaceholder("e.g., Daily Notes").setValue(this.plugin.settings.dailyNotesFolder).onChange(async o=>{let n=o.trim().replace(/^\/+|\/+$/g,"");this.plugin.settings.dailyNotesFolder=n,await this.plugin.saveSettings();let g=moment().format(this.plugin.settings.dailyNoteFormat),D=n?`${n}/${g}.md`:`${g}.md`;t.setText(`Example path: ${D}`)})),e.createEl("br");let m=e.createDiv("setting-item-description"),c=moment().format(this.plugin.settings.weeklyNoteFormat),k=this.plugin.settings.weeklyNotesFolder?`${this.plugin.settings.weeklyNotesFolder}/${c}.md`:`${c}.md`;m.setText(`Example path: ${k}`),new s.Setting(e).setName("Weekly notes folder").setDesc("Folder where weekly notes will be created (leave empty for vault root)").addText(l=>l.setPlaceholder("e.g., Weekly Notes").setValue(this.plugin.settings.weeklyNotesFolder).onChange(async o=>{let n=o.trim().replace(/^\/+|\/+$/g,"");this.plugin.settings.weeklyNotesFolder=n,await this.plugin.saveSettings();let g=moment().format(this.plugin.settings.weeklyNoteFormat),D=n?`${n}/${g}.md`:`${g}.md`;m.setText(`Example path: ${D}`)})),e.createEl("br"),new s.Setting(e).setName("Date formats").setHeading(),e.createEl("p",{text:"Configure date formats using Moment.js format strings. ",cls:"setting-item-description"}),e.createEl("a",{text:"View format reference",href:"https://momentjs.com/docs/#/displaying/format/"}).setAttr("target","_blank"),e.createEl("br"),e.createEl("br");let h=e.createDiv("setting-item-description");h.setText(`Preview: ${moment().format(this.plugin.settings.dailyNoteFormat)}`),new s.Setting(e).setName("Daily note filename format").setDesc("Format for daily note filenames and links (e.g., YYYY-MM-DD)").addText(l=>l.setPlaceholder("YYYY-MM-DD").setValue(this.plugin.settings.dailyNoteFormat).onChange(async o=>{this.plugin.settings.dailyNoteFormat=o,await this.plugin.saveSettings();try{h.setText(`Preview: ${moment().format(o)}`)}catch(n){h.setText("Preview: Invalid format")}})),e.createEl("br");let p=e.createDiv("setting-item-description");p.setText(`Preview: ${moment().format(this.plugin.settings.weeklyNoteFormat)}`),new s.Setting(e).setName("Weekly note filename format").setDesc("Format for weekly note filenames and links (use W for ISO week number, GGGG for ISO week year, [text] for literal text)").addText(l=>l.setPlaceholder("GGGG - [Week] W").setValue(this.plugin.settings.weeklyNoteFormat).onChange(async o=>{this.plugin.settings.weeklyNoteFormat=o,await this.plugin.saveSettings();try{p.setText(`Preview: ${moment().format(o)}`)}catch(n){p.setText("Preview: Invalid format")}})),e.createEl("br");let w=e.createDiv("setting-item-description"),f=moment().isoWeekday(1),y=f.clone().add(6,"days");w.setText(`Preview: ${f.format(this.plugin.settings.weeklyDateRangeFormat)} - ${y.format(this.plugin.settings.weeklyDateRangeFormat)}`),new s.Setting(e).setName("Weekly note date range format").setDesc("Format for the date range shown in weekly notes (e.g., MMMM Do)").addText(l=>l.setPlaceholder("MMMM Do").setValue(this.plugin.settings.weeklyDateRangeFormat).onChange(async o=>{this.plugin.settings.weeklyDateRangeFormat=o,await this.plugin.saveSettings();try{let n=moment().isoWeekday(1),g=n.clone().add(6,"days");w.setText(`Preview: ${n.format(o)} - ${g.format(o)}`)}catch(n){w.setText("Preview: Invalid format")}})),e.createEl("br"),new s.Setting(e).setName("Common format patterns").setHeading();let r=e.createEl("ul");r.createEl("li").setText("YYYY-MM-DD \u2192 2026-01-06 (for daily notes)"),r.createEl("li").setText("YYYY/MM/DD \u2192 2026/01/06 (for daily notes)"),r.createEl("li").setText("YYYY.MM.DD \u2192 2026.01.06 (for daily notes)"),r.createEl("li").setText("YYYYMMDD \u2192 20260106 (for daily notes)"),r.createEl("li").setText("GGGG-[W]W \u2192 2026-W2 (for weekly notes)"),r.createEl("li").setText("GGGG - [Week] W \u2192 2026 - Week 2 (for weekly notes)"),r.createEl("li").setText("MMMM Do \u2192 January 6th (for date ranges)"),r.createEl("li").setText("MMM D \u2192 Jan 6 (for date ranges)"),e.createEl("br"),e.createDiv("setting-item-description").setText("Note: Use GGGG (ISO week year) instead of YYYY for weekly notes to handle year boundaries correctly.")}};
