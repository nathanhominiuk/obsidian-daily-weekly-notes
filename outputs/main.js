/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var k=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var F=Object.getOwnPropertyNames;var N=Object.prototype.hasOwnProperty;var u=(i,e)=>{for(var a in e)k(i,a,{get:e[a],enumerable:!0})},M=(i,e,a,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of F(e))!N.call(i,t)&&t!==a&&k(i,t,{get:()=>e[t],enumerable:!(o=p(e,t))||o.enumerable});return i};var x=i=>M(k({},"__esModule",{value:!0}),i);var W={};u(W,{default:()=>w});module.exports=x(W);var s=require("obsidian"),g={dailyNoteFormat:"YYYY-MM-DD",weeklyNoteFormat:"GGGG - [Week] W",weeklyDateRangeFormat:"MMMM Do"},w=class extends s.Plugin{async onload(){await this.loadSettings(),this.addCommand({id:"create-daily-note",name:"Create Daily Note",callback:()=>{this.createDailyNote()}}),this.addCommand({id:"create-weekly-note",name:"Create Weekly Note",callback:()=>{this.createWeeklyNote()}}),this.addSettingTab(new f(this.app,this))}async loadSettings(){let e=await this.loadData();this.settings=Object.assign({},g,e),(!this.settings.dailyNoteFormat||this.settings.dailyNoteFormat.trim()==="")&&(this.settings.dailyNoteFormat=g.dailyNoteFormat),(!this.settings.weeklyNoteFormat||this.settings.weeklyNoteFormat.trim()==="")&&(this.settings.weeklyNoteFormat=g.weeklyNoteFormat),(!this.settings.weeklyDateRangeFormat||this.settings.weeklyDateRangeFormat.trim()==="")&&(this.settings.weeklyDateRangeFormat=g.weeklyDateRangeFormat)}async saveSettings(){await this.saveData(this.settings)}async createDailyNote(){try{let e=moment(),o=`${e.format(this.settings.dailyNoteFormat)}.md`,t=this.generateDailyNoteContent(e);await this.createOrUpdateNote(o,t,"daily")}catch(e){console.error("Error creating daily note:",e),new s.Notice("Failed to create daily note. Check console for details.")}}async createWeeklyNote(){try{let e=moment(),o=`${e.format(this.settings.weeklyNoteFormat)}.md`,t=this.generateWeeklyNoteContent(e);await this.createOrUpdateNote(o,t,"weekly")}catch(e){console.error("Error creating weekly note:",e),new s.Notice("Failed to create weekly note. Check console for details.")}}generateDailyNoteContent(e){try{let a=e.format("dddd MMMM Do, YYYY"),o=e.format(this.settings.weeklyNoteFormat),t=e.clone().subtract(1,"day").format(this.settings.dailyNoteFormat),l=e.clone().add(1,"day").format(this.settings.dailyNoteFormat);return`*${a}*

Week - [[${o}]]
Yesterday - [[${t}]]
Tomorrow - [[${l}]]

---

`}catch(a){throw console.error("Error generating daily note content:",a),new Error("Invalid date format settings")}}generateWeeklyNoteContent(e){try{let a=e.clone().isoWeekday(1),o=a.clone().add(6,"days"),t;if(a.month()===o.month()){let n=this.settings.weeklyDateRangeFormat,c=n.includes(" ")&&n.split(" ").pop()||"Do";t=`${a.format(n)} - ${o.format(c)}`}else t=`${a.format(this.settings.weeklyDateRangeFormat)} - ${o.format(this.settings.weeklyDateRangeFormat)}`;let y=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map((n,c)=>{let h=a.clone().add(c,"days");return`${n} - [[${h.format(this.settings.dailyNoteFormat)}]]`}).join(`
`),r=e.clone().subtract(1,"week").format(this.settings.weeklyNoteFormat),m=e.clone().add(1,"week").format(this.settings.weeklyNoteFormat);return`*${t}*

Last week - [[${r}]]

${y}

Next week - [[${m}]]

---

`}catch(a){throw console.error("Error generating weekly note content:",a),new Error("Invalid date format settings")}}async createOrUpdateNote(e,a,o){try{let t=this.app.vault.getAbstractFileByPath(e);if(t instanceof s.TFile){let y=await this.app.vault.read(t),d=a+`
`+y;await this.app.vault.modify(t,d),new s.Notice(`${o==="daily"?"Daily":"Weekly"} note template added to existing file`)}else await this.app.vault.create(e,a),new s.Notice(`${o==="daily"?"Daily":"Weekly"} note created`);let l=this.app.vault.getAbstractFileByPath(e);l instanceof s.TFile&&await this.app.workspace.getLeaf().openFile(l)}catch(t){throw console.error("Error creating/updating note:",t),new s.Notice(`Failed to create ${o} note. The file may be open in another program or the format may be invalid.`),t}}},f=class extends s.PluginSettingTab{constructor(e,a){super(e,a),this.plugin=a}display(){let{containerEl:e}=this;e.empty(),e.createEl("h2",{text:"Daily & Weekly Notes Settings"}),e.createEl("p",{text:"Configure date formats using Moment.js format strings. ",cls:"setting-item-description"}),e.createEl("a",{text:"View format reference",href:"https://momentjs.com/docs/#/displaying/format/"}).setAttr("target","_blank"),e.createEl("br"),e.createEl("br");let o=e.createDiv("setting-item-description");o.setText(`Preview: ${moment().format(this.plugin.settings.dailyNoteFormat)}`),new s.Setting(e).setName("Daily note filename format").setDesc("Format for daily note filenames and links (e.g., YYYY-MM-DD)").addText(m=>m.setPlaceholder("YYYY-MM-DD").setValue(this.plugin.settings.dailyNoteFormat).onChange(async n=>{this.plugin.settings.dailyNoteFormat=n,await this.plugin.saveSettings();try{o.setText(`Preview: ${moment().format(n)}`)}catch(c){o.setText("Preview: Invalid format")}})),e.createEl("br");let t=e.createDiv("setting-item-description");t.setText(`Preview: ${moment().format(this.plugin.settings.weeklyNoteFormat)}`),new s.Setting(e).setName("Weekly note filename format").setDesc("Format for weekly note filenames and links (use W for ISO week number, GGGG for ISO week year, [text] for literal text)").addText(m=>m.setPlaceholder("GGGG - [Week] W").setValue(this.plugin.settings.weeklyNoteFormat).onChange(async n=>{this.plugin.settings.weeklyNoteFormat=n,await this.plugin.saveSettings();try{t.setText(`Preview: ${moment().format(n)}`)}catch(c){t.setText("Preview: Invalid format")}})),e.createEl("br");let l=e.createDiv("setting-item-description"),y=moment().isoWeekday(1),d=y.clone().add(6,"days");l.setText(`Preview: ${y.format(this.plugin.settings.weeklyDateRangeFormat)} - ${d.format(this.plugin.settings.weeklyDateRangeFormat)}`),new s.Setting(e).setName("Weekly note date range format").setDesc("Format for the date range shown in weekly notes (e.g., MMMM Do)").addText(m=>m.setPlaceholder("MMMM Do").setValue(this.plugin.settings.weeklyDateRangeFormat).onChange(async n=>{this.plugin.settings.weeklyDateRangeFormat=n,await this.plugin.saveSettings();try{let c=moment().isoWeekday(1),h=c.clone().add(6,"days");l.setText(`Preview: ${c.format(n)} - ${h.format(n)}`)}catch(c){l.setText("Preview: Invalid format")}})),e.createEl("br"),e.createEl("h3",{text:"Common Format Patterns"});let r=e.createEl("ul");r.createEl("li").setText("YYYY-MM-DD \u2192 2026-01-06 (for daily notes)"),r.createEl("li").setText("YYYY/MM/DD \u2192 2026/01/06 (for daily notes)"),r.createEl("li").setText("YYYY.MM.DD \u2192 2026.01.06 (for daily notes)"),r.createEl("li").setText("YYYYMMDD \u2192 20260106 (for daily notes)"),r.createEl("li").setText("GGGG-[W]W \u2192 2026-W2 (for weekly notes)"),r.createEl("li").setText("GGGG - [Week] W \u2192 2026 - Week 2 (for weekly notes)"),r.createEl("li").setText("MMMM Do \u2192 January 6th (for date ranges)"),r.createEl("li").setText("MMM D \u2192 Jan 6 (for date ranges)"),e.createEl("br"),e.createDiv("setting-item-description").setText("Note: Use GGGG (ISO week year) instead of YYYY for weekly notes to handle year boundaries correctly.")}};
